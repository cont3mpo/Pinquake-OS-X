#!/bin/bash
terminal-notifier -title "Pinquake (Global)" -message "Esperando sismo para notificar..."
echo "Pinquake (Global) - Esperando sismo para notificar..."
touch /tmp/nuevo_usgs /tmp/viejo_usgs
touch /tmp/nuevo_geofon /tmp/viejo_geofon
touch /tmp/nuevo_emsc /tmp/viejo_emsc
while sleep 1m; (curl -s http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/4.5_day.csv | cut -d ',' -f 1,5,14- | cut -c -19,25- | sed '1d ; s/T/ / ; s/,/ - /g ; s/"//g' | cut -d '-' -f -6 | cut -c 23- > /tmp/nuevo_usgs); do (diff /tmp/nuevo_usgs /tmp/viejo_usgs | head -n 1); done | while read line; do (terminal-notifier -title "Pinquake (Global)" -message "USGS: `head -n 1 /tmp/nuevo_usgs`"); echo "USGS: `head -n 1 /tmp/nuevo_usgs`" ; cp /tmp/nuevo_usgs /tmp/viejo_usgs; done | while sleep 1m; (curl -s http://geofon.gfz-potsdam.de/eqinfo/list.php?fmt=rss | grep -e title -e description | cut -d '>' -f 2 | cut -d '<' -f 1 | sed '1,3d ; N;s/\n/ / ; s/,/ -/g' | cut -c 3- | cut -d ':' -f -2 > /tmp/nuevo_geofon); do (diff /tmp/nuevo_geofon /tmp/viejo_geofon | head -n 1); done | while read line; do (terminal-notifier -title "Pinquake (Global)" -message "GEOFON: `head -n 1 /tmp/nuevo_geofon`"); echo "GEOFON: `head -n 1 /tmp/nuevo_geofon`" ; cp /tmp/nuevo_geofon /tmp/viejo_geofon; done | while sleep 1m; (curl -s 'http://www.emsc-csem.org/service/rss/rss.php?typ=emsc&magmin=4' | cut -d '>' -f 3,15 | sed '1,7d ; s|</title>| |g ; s/UTC//g' | cut -c 4- | cut -d '<' -f -1 > /tmp/nuevo_emsc); do (diff /tmp/nuevo_emsc /tmp/viejo_emsc | head -n 1); done | while read line; do (terminal-notifier -title "Pinquake (Global)" -message "EMSC: `head -n 1 /tmp/nuevo_emsc`"); echo "EMSC: `head -n 1 /tmp/nuevo_emsc`" ; cp /tmp/nuevo_emsc /tmp/viejo_emsc; done
